<% show_user = nil if !defined?(show_user) -%>
<% show_controls = nil if !defined?(show_controls) -%>
<%- if i == 0 -%>
<li class="blogcast small first">
<%- else -%>
<li class="blogcast small">
<%- end -%>
<%- i = i + 1 -%>
  <div class="spacer">
<%- user = blogcast.user -%>    
<%- if show_user -%>
    <%= link_to image_tag(user.setting.avatar(:medium), :class => "avatar medium"), profile_path(:username => user.username) -%>
<%- else -%>
    <div class="date">
      <div class="calender">
        <div class="month"><%= blogcast.starting_at.strftime("%b") -%></div>
        <div class="day"><%= blogcast.starting_at.day -%></div>
      </div>
    </div>
<%- end -%>
    <div class="right">
      <%= link_to blogcast.title, username_blogcast_permalink_path(:username => user.username, :year => blogcast.year, :month => blogcast.month, :day => blogcast.day, :title => blogcast.link_title), :class => "title" -%>
<% if show_controls -%>
      <div class="controls">
        <%= link_to "Dashboard", blogcast_dashboard_path(:blogcast_id => blogcast.id) %>
        -
        <%= link_to "Edit", edit_blogcast_path(:id => blogcast.id) %>
        -
        <%= link_to "Delete", blogcast_path(:id => blogcast.id), :confirm => "Are you sure you want to delete \"#{blogcast.title}\"? This can not be undone.", :method => "delete", :class => "delete" %>
<%- num_posts = blogcast.posts.count -%>
      </div>
<% end -%>
    </div>
    <div class="clear">
    </div>
  </div>
</li>
